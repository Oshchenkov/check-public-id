"use strict";function asyncGeneratorStep(e,n,t,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(c){return function(){var e=this,i=arguments;return new Promise(function(n,t){var r=c.apply(e,i);function o(e){asyncGeneratorStep(r,n,t,o,a,"next",e)}function a(e){asyncGeneratorStep(r,n,t,o,a,"throw",e)}o(void 0)})}}function initGeoInfo(){return _initGeoInfo.apply(this,arguments)}function _initGeoInfo(){return(_initGeoInfo=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n,r,t,o,a,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t in n)"geoplugin_credit"!==t&&0!=n[t].length&&r.insertAdjacentHTML("beforeend",'<li class="geo-info__li">'.concat(t,": <b>").concat(n[t],"</b></li>"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)},i=function(e){return c.apply(this,arguments)},a=function(){return(a=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("http://www.geoplugin.net/json.gp"),e.next=3,fetch(n).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log("Fetch error: ",e)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)},o=function(){return a.apply(this,arguments)},n=document.querySelector(".geo-info"),(r=document.createElement("ul")).className="geo-info__ul",n.innerHTML="",n.insertAdjacentElement("beforeend",r),t={},e.next=12,o();case 12:t=e.sent,i(t),initMap(t);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.addEventListener("load",function(){initGeoInfo()});var map,btnLoad=document.querySelector("#loadBtn");function initMap(e){map=new google.maps.Map(document.getElementById("map"),{zoom:10}),currentCoordinates={lat:parseFloat(e.geoplugin_latitude),lng:parseFloat(e.geoplugin_longitude)},map.setCenter(currentCoordinates);new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.7,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.3,map:map,center:currentCoordinates,radius:100*parseFloat(e.geoplugin_locationAccuracyRadius)});console.log(map)}btnLoad.addEventListener("click",function(e){e.preventDefault(),initGeoInfo()});